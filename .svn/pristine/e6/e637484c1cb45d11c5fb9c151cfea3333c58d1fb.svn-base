<!--应急通信 -->
<template>
  <div class="contentbox">
    <Header title="山东联通网络智慧眼-宽带" subtitle="综合预警"></Header>
    <div class="contentbody">
      <div class="leftbox flex colflex" v-show="mapLevel != 4">

        <div class="box-item flex colflex flex1">
          <div class="item-title titlefont">
            <span>FTTH光功劣化占比</span>
          </div>

          <div class="flex1">
            <div class="chartbox" id="chart_ftth"></div>
          </div>
        </div>

        <div class="box-item flex colflex flex1">
          <div class="item-title titlefont">
            <span>IPTV质差用户比率</span>
          </div>

          <div class="flex1">
            <div class="chartbox" id="chart_IPTV"></div>
          </div>
        </div>


        <div class="box-item flex colflex flex1">
          <div class="item-title titlefont">
            <span>固网感知提升</span>
          </div>
          <div class="rowttabs">
            <span class="rowttabs-item" :class="{'active': rowttabStatus == '4'}"
                  @click="rowttabsClick('4')">端网不匹配</span>
            <span class="rowttabs-item" :class="{'active': rowttabStatus == '1'}"
                  @click="rowttabsClick('1')">光衰质差</span>
            <span class="rowttabs-item" :class="{'active': rowttabStatus == '2'}"
                  @click="rowttabsClick('2')">IPV6改造</span>
            <span class="rowttabs-item" :class="{'active': rowttabStatus == '3'}"
                  @click="rowttabsClick('3')">IPTV质差</span>
            
          </div>
        
          <div class="flex1">
            <div class="chartbox" id="chart_gwgzts"></div>
          </div>
        </div>
      </div>
      <!-- 包区展示 -->
        <div class="leftbox flex colflex" v-show="mapLevel == 4">

            <div class="box-item flex colflex flex1">
              <div class="item-title titlefont">
                 <span>装机</span>
              </div>

              <div class="flex1">
                <el-table
                  id = "bqtable_zj"
                  class="custom_table groupheadtable"
                  :data="bqtableData"
                  style="width: 100%" height="400" size="mini" :cell-class-name = "cellCalssNameFn1">
                  <el-table-column prop="name"  label="人员" fixed show-overflow-tooltip> </el-table-column>
                  <el-table-column prop="zyj_total_nums"  label="装机总量" show-overflow-tooltip></el-table-column>
                  <el-table-column prop="" label="超时">
                    <el-table-column prop="zyj_gaojing_kd_nums"  label="宽带"></el-table-column>
                    <el-table-column prop="zyj_gaojing_iptv_nums"  label="iptv"></el-table-column>
                    <el-table-column prop="zyj_gaojing_guhua_nums"  label="固话"></el-table-column>
                    <el-table-column prop="zyj_gaojing_nums"  label="超时总量"></el-table-column>
                  </el-table-column>
                   <el-table-column prop="" label="预警">
                    <el-table-column prop="zyj_yujing_kd_nums"  label="宽带"></el-table-column>
                    <el-table-column prop="zyj_yujing_iptv_nums"  label="iptv"></el-table-column>
                    <el-table-column prop="zyj_yujing_guhua_nums"  label="固话"></el-table-column>
                    <el-table-column prop="zyj_yujing_nums"  label="预警总量"></el-table-column>
                  </el-table-column> 
                </el-table>
              </div>
            </div>
            <div class="box-item flex colflex flex1">
              <div class="item-title titlefont">
                <span>修机</span>
              </div>

              <div class="flex1">
                 <el-table
                  id = "bqtable_zj"
                  class="custom_table"
                  :data="bqtableData"
                  style="width: 100%" height="400" size="mini" >
                  <el-table-column prop="name"  label="人员" show-overflow-tooltip> </el-table-column>
                  <el-table-column prop="xj_nums"  label="在途修机总量" show-overflow-tooltip></el-table-column>
                  <el-table-column prop="xj_gaojing_nums"  label="修机超时工单"></el-table-column>
                  <el-table-column prop="xj_yujing_nums"  label="修机预警工单"></el-table-column>
                  
                </el-table>
              </div>
          </div>

        </div>
      <div class="centerbox flex colflex">
        <div class="centTab">
          <div class="centtabitem titlefont" :class="{'active': tabstatus == '02010'}" @click="tabStatusFn('02010')">
            <span>装机</span>
          </div>
          <div class="centtabitem titlefont" :class="{'active': tabstatus == '02020'}" @click="tabStatusFn('02020')">
            <span>修机</span>
          </div>

          <div class="centtabitem titlefont" :class="{'active': tabstatus == '02030'}" @click="tabStatusFn('02030')">
            <span>投诉</span>
          </div>

          <div class="centtabitem titlefont" :class="{'active': tabstatus == '02040'}" @click="tabStatusFn('02040')">
            <span>群障</span>
          </div>
        </div>
          <div class = "substTab">
               <el-radio-group v-model="subRadio">
                  <el-radio  label="2">超时</el-radio>
                  <el-radio  label="1">预警</el-radio> 
              </el-radio-group>
              <div class="pull-rightdetail">
                <span class="alink" @click="modelOMdetail('qx')"  v-if = "mapLevel == 2 || mapLevel == 3">
                 {{mapLevel == '3' ? '营服排名' : '区县排名'}}  
               </span>
                <span class="alink"  @click="modelOMdetail('yf')" v-if = "mapLevel == 2">营服排名</span>
                <span class="alink"  @click="modelOMdetail('bq')" v-if = "mapLevel == 4">包区排名</span>
              </div>
          </div>
           <div class="gistitle">
              <span class="titlefont">{{gisTitle}}</span>
            </div>
        <iframe ref="gisiframe" id="gisiframe" :src="iframeSrc" style="widh: 100%; height: 100%"
                frameborder="0"></iframe>
      </div>

       <div class="rightbox flex colflex" v-show="mapLevel != 4">

        <div class="box-item flex colflex flex1">
          <div class="item-title titlefont">
            <span>标准地址预警</span>
          </div>

          <div class="flex1">
            <el-table
              id = "bzdiyjTable"
              class="custom_table"
              :data="tableData1"
              style="width: 100%" height="400" size="mini">
              <el-table-column
                v-for="(col, index) in tcolums1" :key="index"
                :prop="col.filed"
                :label="col.title"
                :width="col.width || ''" show-overflow-tooltip>
              </el-table-column>
            </el-table>
          </div>
        </div>
        <div class="box-item flex colflex flex1">
          <div class="item-title titlefont">
            <span>系统异常卡单预警</span>
          </div>

          <div class="flex1">
            <el-table
              id = "xtycyjTable"
              class="custom_table custom_table_yj"
              :data="tableData2"
              style="width: 100%" height="422" size="mini">
              <el-table-column
                v-for="(col, index) in tcolums2" :key="index"
                :prop="col.filed"
                :label="col.title"
                :width="col.width || 'auto'" show-overflow-tooltip>
              </el-table-column>
            </el-table>
          </div>
      </div>

      </div>
      <div class="rightbox flex colflex" v-show="mapLevel == 4">
        <div class="box-item flex colflex flex1">
              <div class="item-title titlefont">
                <span>投诉</span>
              </div>

              <div class="flex1">
                 <el-table
                  id = "bqtable_zj"
                  class="custom_table"
                  :data="bqtableData"
                  style="width: 100%" height="400" size="mini" >
                  <el-table-column prop="name"  label="人员" show-overflow-tooltip> </el-table-column>
                  <el-table-column prop="ts_nums"  label="在途投诉数量" show-overflow-tooltip></el-table-column>
                  <el-table-column prop="ts_gaojing_nums"  label="投诉超时工单"></el-table-column>
                  <el-table-column prop="ts_yujing_nums"  label="投诉预警工单"></el-table-column>
                  
                </el-table>
              </div>
          </div>
          <div class="box-item flex colflex flex1">
              <div class="item-title titlefont">
                <span>群障</span>
              </div>

              <div class="flex1">
                 <el-table
                  id = "bqtable_zj"
                  class="custom_table"
                  :data="bqtableData"
                  style="width: 100%" height="400" size="mini" >
                  <el-table-column prop="name"  label="人员" show-overflow-tooltip> </el-table-column>
                  <el-table-column prop="qz_nums"  label="在途群障数量" show-overflow-tooltip></el-table-column>
                  <el-table-column prop="qz_gaojing_nums"  label="群障超时工单"></el-table-column>
                  <el-table-column prop="qz_yujing_nums"  label="群障预警工单"></el-table-column>
                  
                </el-table>
              </div>
          </div>
      </div>
       <!-- 包区展示 -->


    </div>
    
    <Footer :tabdata="tabdata" class="initfoot"></Footer>

       <el-dialog :visible.sync="isDialogShow" width="90%" :modal-append-to-body='false'>
        <div class="dialogCon">
          <div class="dialogTitle">
            <div class="left">{{dialogTitle}}</div>
            
          </div>
          <div class="dialogTableBg">
            <div class="pmdetalibox">
              <div class="left_pmtb">
                  <el-table :data="pm_tableData"  style="width: 100%;overflow: auto;" height = "560">
                    <el-table-column
                      label="排名" 
                      type="index"
                      width="60">
                    </el-table-column>
                    <el-table-column prop="name" label="名称" width="auto" show-overflow-tooltip> </el-table-column>
                    <el-table-column :prop="pmkeyVal" :label="pmName + '工单'" width="100">
                       <template slot-scope="scope">
                         <span class="alink" @click="gdmxDetailFn(scope.row)">{{scope.row[pmkeyVal]}}</span>
                        </template>
                    </el-table-column>
                  </el-table>
              </div>
              <div class="right_pmtb flex1">
                <div class="rpmtitle titlefont">
                  <span>工单明细</span>
                  <!-- <div class="subtagtab">
                    <div class="rowttabs">
                      <span class="rowttabs-item" :class="{'active': pmstatus == '1'}"
                            @click="pmstatus = '1'">工单</span>
                      <span class="rowttabs-item" :class="{'active': pmstatus == '2'}"
                            @click="pmstatus = '2'">人员</span>
                    </div>
                  </div> -->
                </div>
                <div >
                  <el-table :data="pm_tableDataDetail"  style="width: 1100px;" height = "560" v-loading = "tdloading" >
                    <el-table-column label="营服名称"   prop="org_name"  width="160px" align="left" ></el-table-column>
                    <el-table-column prop="task_order_cd" label="工单流水号" show-overflow-tooltip width="200px"> </el-table-column>
                    <el-table-column prop="deal_userid" label="智A工号" show-overflow-tooltip width="100px"> </el-table-column>
                    <el-table-column prop="deal_username" label="智A姓名" show-overflow-tooltip width="80px"> </el-table-column>
                    <el-table-column prop="deal_usercall" label="智A联系方式" show-overflow-tooltip width="100px"> </el-table-column>
                    <el-table-column prop="busi_nbr" label="业务号码" show-overflow-tooltip width="120px"> </el-table-column>
                    <el-table-column prop="cust_call" label="用户联系方式" show-overflow-tooltip  width="120px"> </el-table-column>
                    <el-table-column prop="cust_hurry_times" label="用户催修次数" show-overflow-tooltip  width="100px"> </el-table-column>
                    <el-table-column prop="address" label="装机地址" width="300px" align="left"> </el-table-column>
                    <el-table-column prop="create_dt" label="受理时间" show-overflow-tooltip  width="160px"> </el-table-column>
                    <el-table-column prop="requirte_date" label="预约时间" show-overflow-tooltip  width="160px"> </el-table-column>
                    <el-table-column prop="back_dt" label="回单时间" show-overflow-tooltip  width="160px"> </el-table-column>
                    <el-table-column prop="prod_name" label="产品类型" show-overflow-tooltip > </el-table-column> 
                  </el-table>
                </div>

            
                 
              </div>
            </div>
           
          </div>
        </div>
      </el-dialog>
  </div>
</template>

<script>
  import Header from '@/components/resource_visual/header';
  import Footer from '@/components/resource_visual/footer';
  import {warnList, serviceKdGjpm, serviceKdGdmx} from "@/api/broadband/warn";
  import echarts_zq from '../echarts_component/echarts_zq';
  import vueSeamlessScroll from 'vue-seamless-scroll'
  import store from 'store'
  import {mapState} from 'vuex'
  var _ = require('@/utils/lodash.js')


  var Qs = require('@/utils/qs.js')

  var self = null
  export default {
    data() {
      return {
        tdloading: false,
        usertableData: [],
        pmstatus: '1',
        dialogTitle: '',
        isDialogShow: false,
        gisTitle: '山东省',
        cityCode: '370000',
        iframeSrc: '',
        rowttabStatus: '4',
        //  活动名称、活动地点、保障单位、保障车辆（数量）、人员（数量）、收入（万元
        tcolums1: [
          {title: '地市', filed: 'name'},
          {title: '一次自动核配成功率', filed: 'addres_match', width: '90'},
          {title: '标准地址与设备未关联', filed: 'addres_out', width: '100'},
          {title: '未落图小区数量', filed: 'wlt_cell_cnt', width: '68'},
          {title: '未落图包区数量', filed: 'wlt_baoqu_cnt', width: '68'},
          {title: '未落图设备ftth数量', filed: 'wlt_ftth_cnt', width: '72'},
        ],
        tableData1: [], // 保障活动

        tcolums2: [
          {title: '地市', filed: 'name', width: '120'},
          {title: 'IOM卡单', filed: 'iom_out_orders'},
          {title: '公客卡单', filed: 'gk_out_orders'},
        ],
        tableData2: [],

        tabstatus: '02010',
        subRadio: '2',
        gisQueryParams: {},
        queryParams: {},
        gisMapData: {},
        mapLevel: 1,
        areaCode: '',
        tabdata: [
          {title: '网络能力', href: ''},
          {title: '综合预警', active: true, href: '/resource_visual/broadband_zhyj'},
          {title: '综合效能', active: false, href: '/resource_visual/broadband_zhxn'},
          {title: '宽带赋能', active: false, href: '/resource_visual/jsc_kdfn'},
          {title: '网营CEO', active: false, href: '/resource_visual/broadband_ceo'},
          {title: '存量经营', active: false, href: ''}
        ],
        ftphList: [],
        cityList: [],
        ftth_out: [],
        iptv_out_rate: [],
        guang_out: [],
        ipv_out: [],
        iptvOut: [],
        duanwang_out: [],
        pmkeyVal: 'zyj_gaojing_nums',
        pm_tableData: [],
        pmName: '装机超时',
        pm_tableDataDetail: [],
        bqtableData: [],
        averageData: {},
      }
    },
    components: {
      Header,
      Footer,
      vueSeamlessScroll
    },
    created() {
      self = this;
    },
    mounted() {
      var initArea_id = '370000'
      if (store.get('userInfo')) {
         if (store.get('userInfo').gridId) {
          this.mapLevel = 4;
          initArea_id = store.get('userInfo').gridId
        } else if (store.get('userInfo').areaCode) {
          this.mapLevel = 3;
          initArea_id = store.get('userInfo').areaCode
        } else if (store.get('userInfo').eparchyCode && store.get('userInfo').eparchyCode != '0000') {
          this.mapLevel = 2;
          initArea_id = store.get('userInfo').eparchyCode
        } else {
          this.mapLevel = 1;
          initArea_id = '370000'
        };
        this.cityCode = initArea_id;
      }
     
      this.initGisMap(initArea_id);
      // 注册地图事件
      window.addEventListener('message', self.gismapListener, true)
      this.getList();
     
    },
    watch: {
      gisStatus (type) {
        var pmkeyVal = '';
        var pmName  = ''
        switch (type) {
          case '020102':
            // 装机超时
            pmkeyVal =  'zyj_gaojing_nums'
            pmName = '装机超时'
            break;
          case '020101':
              // 装机预警
            pmkeyVal =  'zyj_yujing_nums'
             pmName = '装机预警'
            break;
          case '020202':
            // 修机超时
            pmkeyVal =  'xj_gaojing_nums'
             pmName = '修机超时'
            break;
          case '020201':
            // 修机预警
            pmkeyVal =  'xj_yujing_nums'
             pmName = '修机预警'
            break;
          case '020302':
            // 投诉超时
            pmkeyVal =  'ts_gaojing_nums'
             pmName = '投诉超时'
            break;
          case '020301':
             // 投诉预警
            pmkeyVal =  'ts_yujing_nums'
             pmName = '投诉预警'
            
            break;
          case '020402':
            // 群障超时
            pmkeyVal =  'qz_gaojing_nums'
             pmName = '群障超时'
            break;
          case '020401':
             // 群障预警
            pmkeyVal =  'qz_yujing_nums'
             pmName = '群障预警'
            break;
          default:
            break;
        }
        this.pmName = pmName;
        this.pmkeyVal = pmkeyVal
        

        var gisQueryParams = JSON.parse(JSON.stringify(this.gisQueryParams));
        gisQueryParams.message = "changeType";
        gisQueryParams.gis_sceneid = type;
        this.$refs['gisiframe'].contentWindow.postMessage(gisQueryParams, '*')

       
      }
    },
    computed: {
      ...mapState({
        searchDate: state => state.resource.searchDate,
      }),
      gisStatus () {
        return this.tabstatus + this.subRadio;
      },
      
    },
    methods: {
      orderDataFn (datas, key) {
        return  _.orderBy(datas, function (item) {
            return Number(item[key])  || 0;
        }, ['desc']);
     },
      cellCalssNameFn1 ({row, column, rowIndex, columnIndex}) {
        var rowIndexArr= [0, 1, 5, 9]
        if (rowIndexArr.indexOf(columnIndex) > -1) {
          return 'cellRborder'
        }
      },
      getList_BQ(){
        var cityCode = this.cityCode  //'8106666'
        this.bqtableData = []
        warnList(cityCode).then(response => { 
           this.bqtableData = response;
        })
      },
      gdmxDetailFn (row) {
        this.serviceKdGdmx(row.code)
      },
      // 工单明细
      serviceKdGdmx (cityCode) {
         var busiTypeMap = {
           '020101': '1',
           '020102': '2',
           '020201': '3',
           '020202': '4',
           '020301': '5',
           '020302': '6',
           '020401': '7',
           '020402': '8'
         }
         var params = {
            busiType: busiTypeMap[this.gisStatus],
            cityCode: cityCode
          }
          this.pm_tableDataDetail = []
          this.tdloading = true
          serviceKdGdmx(params).then((res) => {
            this.tdloading = false
            var datal = res.result.data || []
            this.pm_tableDataDetail = datal           
          }).catch(err => {
             this.tdloading = false
          })
      },
       serviceKdGjpm () {
          var params = {
            cityCode: this.cityCode
          }
          this.pm_tableData = [];
          serviceKdGjpm(params).then((res) => {
            var datal = res.result.data || []
            this.renderPm_tableData(datal)
          })
        },
       renderPm_tableData (datas) {
         var self = this;
         this.pm_tableData = [];
         var dataList = (datas || _.cloneDeep(this.ftphList));
         this.pm_tableData =  _.orderBy(dataList, function (item) {
                return Number(item[self.pmkeyVal] || 0)
          }, 'desc');
      },
      modelOMdetail (type) {
        if (type == 'qx') {
           this.dialogTitle = this.gisTitle + '区县排名明细';
          if (this.mapLevel == '3') {
             this.dialogTitle = this.gisTitle +'营服排名明细';
          };
          this.renderPm_tableData()
        } else if (type == 'yf') {
          this.dialogTitle = this.gisTitle +'营服排名明细';
          this.serviceKdGjpm()
        } else if (type == 'bq') {
          // 包区
         this.dialogTitle = this.gisTitle +'包区排名明细';
         var datas =  _.cloneDeep(this.bqtableData)
         this.renderPm_tableData(datas)
        }
        this.pm_tableDataDetail = [];
        this.isDialogShow = true;

      },
      fillParam(){
        var ftphList =  this.ftphList;
        this.tableData1 = this.ftphList;
        this.tableData2 = this.ftphList;
        var Xdata = this.ftphList.map(item => {
          return item.name;
        })
        // ftph光功劣化占比
        var params1_orderData = this.orderDataFn(ftphList, 'ftth_out');
        let params = {
          domId: 'chart_ftth',
          legend: [],
          name: 'FTTH光功劣化占比',
          uni: '%',
          xData: params1_orderData.map(item => {
            return item.name;
          }),
          bar_markLine: this.averageData.ftth_out,
          barData: params1_orderData.map(item => {
            return Number(item.ftth_out) || 0
          }) 
        }

        echarts_zq.initEchart_barLine(params);


        // iptv质差用户比率
        var params2_orderData = this.orderDataFn(ftphList, 'iptv_out_rate');
        let params2 = {
          domId: 'chart_IPTV',
          name: 'IPTV质差用户比率',
          uni: '%',
          color: "#d57b0f",
          xData:  params2_orderData.map(item => {
            return item.name;
          }),
          line_markLine: this.averageData.iptv_out_rate,
          data: params2_orderData.map(item => {
            return Number(item.iptv_out_rate) || 0
          })  
        }
        echarts_zq.initEchart_singLine(params2)
        
        this.$nextTick(function () {
           window.setTimeout(function () {
             self.$eltable_scrollAuto('bzdiyjTable');
             self.$eltable_scrollAuto('xtycyjTable')
           }, 3000)
        })
        
      },
      gwgztsChartint() {
        var rowttabStatus = this.rowttabStatus;
        var ftphList =  this.ftphList;
        var Xdata = this.ftphList.map(item => {
          return item.name;
        })
        let params3 = {
          domId: 'chart_gwgzts',
          name: '光衰质差',
          uni: '%',
          color: "#d57b0f",
          xData:Xdata,
          data: [],
          line_markLine: 0
        }
       
        if(rowttabStatus == '1') {
          var orderData1 = this.orderDataFn(ftphList, 'guang_out');
          params3.Xdata =  orderData1.map(item => {
            return item.name;
          })
          params3.data = orderData1.map(item => {
            return item.guang_out
          })
          params3.line_markLine =  this.averageData.guang_out;
          
        } else if (rowttabStatus == '2') {
          var orderData2 = this.orderDataFn(ftphList, 'ipv_out');
          params3.Xdata =  orderData2.map(item => {
            return item.name;
          })
          params3.data = orderData2.map(item => {
            return item.ipv_out
          })
           params3.line_markLine =  this.averageData.ipv_out;
        } else if (rowttabStatus == '3') {
          var orderData3 = this.orderDataFn(ftphList, 'iptv_out');
          params3.Xdata =  orderData3.map(item => {
            return item.name;
          })
          params3.data = orderData3.map(item => {
            return item.iptv_out
          })

          params3.line_markLine =  this.averageData.iptv_out;
        }  else if (rowttabStatus == '4') {
           var orderData4 = this.orderDataFn(ftphList, 'duanwang_out');
          params3.Xdata =  orderData4.map(item => {
            return item.name;
          })
          params3.data = orderData4.map(item => {
            return item.duanwang_out
          })

           params3.line_markLine =  this.averageData.duanwang_out;
        } 
         echarts_zq.initEchart_singLine(params3)
      },
      getList(){
        var cityCode = this.cityCode
        this.ftphList = []
        warnList(cityCode).then(response => {
          console.log("response1:",response);
          var datal = response.filter(item => {
            return item.code != '0000'
          })
          var avdatal = response.filter(item => {
            return item.code == '0000'
          })
          this.ftphList = datal;
          this.averageData = avdatal.length > 0 ? avdatal[0] : {}
          this.fillParam()
          this.gwgztsChartint()
        })
      },

      rowttabsClick(type) {
        this.rowttabStatus = type;
         this.gwgztsChartint()
      },
      gismapListener(e) {
        if (e.data.message == 'levelSwitch') {
          self.gisTitle = e.data.area_name || '山东省',
          self.mapLevel = e.data.level
          self.areaCode = e.data.area_id;
          self.gisMapData = e.data;
          self.gisQueryParams = Object.assign({}, self.gisQueryParams, e.data)
          self.gisQueryParams.area_name = '';
          console.log('message', e.data)
          self.cityCode = (e.data.area_id || '370000');

          if (self.mapLevel >=  4){
            self.getList_BQ()
          } else{
            self.getList()
          }
         
         
        }
      },
     
      initGisMap(initArea_id) {
        // 初始化地图参数
        this.gisQueryParams = {
          level: this.mapLevel,
          sceneid: 3,
          gis_sceneid: this.gisStatus,
          area_id: initArea_id,
          poi_city_id: '',
          system_type: 'C40',
          login_no: store.get('staffId') || '',
          timest: this.$store.state.resource.searchDate
        };
        var gisQueryParams = JSON.parse(JSON.stringify(this.gisQueryParams))
        this.iframeSrc = window.gis_iframeSrc +  `/smartEyes?${Qs.stringify(gisQueryParams)}`;

      },

      tabStatusFn(type) {
        this.tabstatus = type;
      },
      initEchart() {
        var params = {
          domId: 'chart_ftth',
          legend: [],
          name: 'FTTH光功劣化占比',
          uni: '%',
          xData: ['青岛', '济南', '日照', '廊坊', '烟台', '青岛'],
          barData: [98, 45, 56, 77, 11, 45],
        }
        echarts_zq.initEchart_barLine(params)

        var params2 = {
          domId: 'chart_IPTV',
          name: 'IPTV质差用户比率',
          uni: '%',
          color: "#d57b0f",
          xData: ['青岛', '济南', '日照', '廊坊', '烟台', '青岛'],
          data: [98, 45, 56, 77, 11, 45]
        }
        echarts_zq.initEchart_singLine(params2)

        var params3 = {
          domId: 'chart_gwgzts',
          name: '光衰质差',
          uni: '%',
          color: "#d57b0f",
          xData: ['青岛', '济南', '日照', '廊坊', '烟台', '青岛'],
          data: [98, 45, 56, 77, 11, 45]
        }
        echarts_zq.initEchart_singLine(params3)


      }
    },
    destroyed() { // 在组件生命周期结束的时候销毁。
      window.removeEventListener('message', this.gismapListener, true)
    }
  }
</script>

<style lang='scss' scoped>
  @import url('../comtable.scss');
  .custom_table_yj.el-table th {
    font-size: 14px;
  }
  /deep/ .bottom-tab {
    width: 60%;
  }

  /deep/ .bottom-tab .bottom-item {
    padding: 4px 10px !important;
  }

  .contentbody {
    height: 100%;
    background: url('~@/assets/images/bigScreen/bg-left.png') left no-repeat, url('~@/assets/images/bigScreen/bg-right.png') right no-repeat;
    background-size: auto 100%;
    margin: -30px 15px 10px 15px;
    position: relative;
    display: flex;
  }

  .leftbox, .rightbox {
    width: 500px;
    height: 100%;
    box-sizing: border-box;
    padding: 15px;
    padding-bottom: 30px;
  }
  .rightbox {
     width: 520px;
  }

  .centerbox {
    flex: 1;
    background: url('~@/assets/images/images_zy/centerborder.png') no-repeat;
    background-size: 100% 100%;
    margin-top: 10px;
    margin-bottom: 80px;
    box-sizing: border-box;
    position: relative;
    padding: 100px 20px 20px 20px;
    position: relative;

  }

  // .item-title {
  //   font-size: 22px;
  //   color: aqua;
  //   background: url('~@/assets/images/images_zy/itemtitle.png') no-repeat;
  //   background-size: 100% 100%;
  //   line-height: 38px;
  //   padding-left: 58px;
  // }

   .item-title {
   font-size: 18px;
   color: aqua;
   background: url('~@/assets/images/bigScreen/titlebg.png') no-repeat;
   background-size: 100% 100%;
   line-height: 46px;
   padding-left: 36px;
   margin-bottom: 5px;
   font-weight: bolder;
 }

  .chartbox {
    width: 100%;
    height: 100%;
  }

  .gdjkitem {
    height: 68px;
    width: 72px;
    margin: 0 auto;
    background: url('~@/assets/images/images_zy/cire.png') no-repeat;
    background-size: 100% 100%;
    line-height: 68px;
    font-size: 18px;
    text-align: center;
    font-weight: bolder;

  }

  .gdjkitembox {
    text-align: center;
    position: relative;
    margin-top: 12px;

    &:not(:last-child)::after {
      content: '';
      display: block;
      width: 18px;
      height: 18px;
      background: url('~@/assets/images/images_zy/jiantou.png') no-repeat;
      background-size: 100% 100%;
      position: absolute;
      right: -8px;
      top: 26px;
    }
  }


  .mtheader {
    text-align: center;
    line-height: 40px;
    font-size: 16px;
    color: #51d1ee;
    border-bottom: 1px solid #308497;
  }

  .mtbody {
    height: 100%;
    margin: 6px 0;
    box-sizing: border-box;
    overflow: hidden;
  }

  .mtbody .scrollitem {
    text-align: center;
    height: 34px;
    line-height: 34px;
    padding: 0 5px;
  }

  .mtbody .scrollitem:nth-child(odd) {
    background: rgba(4, 54, 108, 0.7);
  }

  .centTab {
    position: absolute;
    z-index: 10;
    width: 100%;
    top: 30px;
    text-align: center;

   .centtabitem {
    display: inline-block;
    height: 56px;
    width: 120px;
    line-height: 66px;
    text-align: center;
    font-size: 18px;
    cursor: pointer;
    color: rgb(2, 252, 252);
     background: url('~@/assets/images/images_zy/WechatIMG431.png') no-repeat;
    background-size: 100% 120%;
    margin-right: -15px;
    opacity: 0.5;
    
   }
    .centtabitem.active {
       opacity: 1;
       font-weight: bolder;
    }
  }

  .rowttabs {
    height: 50px;
    line-height: 50px;

    .rowttabs-item {
      padding: 4px 8px;
      border-radius: 5px;
      border: 1px solid #5b7bc9;
      margin-right: 10px;
      color: #698bdf;
      cursor: pointer;
    }

    .rowttabs-item.active {
      border: 1px solid #45d8e2;
      color: #45d8e2;
    }
  }
  .substTab {
    text-align: center;
    position: relative;
    .el-radio {
      color: #ddd;
      margin-right: 20px;
    }
    /deep/ .el-radio__input .el-radio__inner {
        border-color: #ddd;
        background: #ddd;
    }
    /deep/ .el-radio__input.is-checked + .el-radio__label {
        color: #f3c911;
    } 
    /deep/ .el-radio__input.is-checked .el-radio__inner {
        order-color: #ede90f;
       background: #e4ac47;
    }
  }
  .alink {
      cursor: pointer;
      color: #27b5ee;
      text-decoration: underline;
  }
  .pull-rightdetail {
    position: absolute;
    right: 0px;
    top: 0;
    .alink {
      cursor: pointer;
      color: #27b5ee;
      text-decoration: underline;
      margin-right: 15px;
    }
  }


/deep/ .el-dialog {
  -webkit-transform: none;
  transform: none;
  left: 0;
  position: relative;
  z-index: 20000;
  margin: 0 auto;
  padding-bottom: 30px;
  background-image: url('~@/assets/images/bigScreen/kuang.png');
  background-size: 100% 100%;
  background-color: rgba(220, 38, 38, 0);
}

/deep/ .el-dialog__body {
  padding: 0px 20px;
}
/deep/ .el-dialog__headerbtn {
z-index: 9999;
}
/deep/ .el-dialog__headerbtn .el-dialog__close {
  color: #fff;
  font-size: 24px;
  font-weight: 500;
  margin: 2px 20px 0 0;
  border: 2px solid #193987;
  border-radius: 5px;
  background: #1e1e88;
  
}
/deep/ .el-table {
  background: none !important;
  font-size: 14px !important;
}
/deep/.dialogTableBg .el-table th {
  background: none !important;
  background: url('~@/assets/images/bigScreen/fullService/597bcdc505fa3.png') no-repeat !important;
  background-position: center 16px !important;
  background-size: contain !important;
  text-align: center !important;
  color: #02f6ff !important;
  font-size: 15px !important;
}

/deep/ .el-table tr {
  background: none !important;
}

/deep/.el-table td {
  background: none !important;
  border: none !important;
  text-align: center !important;
  color: #ffffff;
  padding: 6px 0;
}
/deep/.el-table td.is-left {
  text-align: left !important;
}


/deep/ .el-table th.is-leaf,
.el-table td {
  border: none !important;
  color: #ffffff;
}
/deep/.el-table::before {
  height: 0 !important;
}
/deep/.el-table th > .cell {
  display: contents !important;
}
/deep/.el-table .cell {
  padding: 0 6px;
  max-height: 45px;
  overflow-y: hidden;
}
/deep/ .dialogTableBg .el-table tr:nth-child(even) {
  background: rgba(4,54,108,0.4) !important;
}
.dialogCon {
  padding: 0 40px;
  .dialogTitle {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-right: 30px;
    border-bottom: 1px dashed #404e77;
    padding: 5px 0;
    .left {
      display: inline-block;
      padding-right: 110px;
      font-size: 20px;
      font-family: MFBanHei;
      font-weight: 400;
      color: #02f6ff;
      background-image: url('~@/assets/images/bigScreen/fullService/Rectangle 561.png');
      background-repeat: no-repeat;
      background-position: center right;
    }
    .title-right {
      color: #218cc8;
      font-size: 12px;
      font-family: Microsoft YaHei;
      div {
        width: 38px;
        height: 30px;
        line-height: 30px;
        text-align: center;
        display: inline-block;
        cursor: pointer;
        background-image: url('~@/assets/images/bigScreen/fullService/left-sub.png');
        background-repeat: no-repeat;
        background-size: 100% 100%;
      }
      .active {
        color: #02f6ff;
        background-image: url('~@/assets/images/bigScreen/fullService/left-subActive.png');
      }
    }
  }
}

.pmdetalibox {
  display: flex;
  min-height: 520px;
  width: 100%;
  box-sizing: border-box;
  padding-bottom: 30px;
}
.left_pmtb {
  width: 400px;
}
.right_pmtb {
  position: relative;
  margin-left: 20px;
  padding-left: 20px;
  border-left: 2px dashed #404e77;
  .rpmtitle {
    position: absolute;
    color: aqua;
    font-size: 20px;
    top: -34px;
    text-align: center;
    width: 100%;
    .subtagtab {
      position: absolute;
      right: 30px;
      top: 0px;
      font-size: 14px;
      font-family: Arial, Helvetica, sans-serif;
      .rowttabs {
        height: 30px;
        line-height: 30px;
        .rowttabs-item {
          padding: 3px 6px;
        }
      }
    }

  }
}
/deep/ .el-loading-mask {
    background-color: rgba(6,26,58, 0.7);
  }

/deep/.groupheadtable.custom_table  thead th:not(:last-child) {
    border-right: 1px solid rgb(45, 61, 94) !important;  
}
/deep/.custom_table .cellRborder {
  border-right: 1px dashed rgb(45, 61, 94) !important;
}
/deep/.el-table__fixed{
  background: #010d2d !important;
}

/deep/.el-table__fixed::before, /deep/ .el-table__fixed-right::before  {
   background: transparent !important;
}
</style>