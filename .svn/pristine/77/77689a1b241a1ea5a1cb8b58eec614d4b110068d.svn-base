<!-- 资源小区大屏 -->
<template>
  <div class = "bodyfont container">
    <div id="markWater">
      <canvas id="water_mark" width="500" height="200"></canvas>
    </div>
    <div class = "headerbox">
      <Header>
        <template v-slot:smallTitle>
          <div  class = "subhtitle">资源视图</div>
        </template>
      </Header>
    </div>
    <div class="bodybox">
      <div class = "bodyleft bwwith">
         <div class = "subtitle">
           <div class = "titlefont stitle">业务统计</div>
         </div>
        <div class = "lefttbox" style="height: 58%; border-bottom: 1px dashed #2d71b5">
              <div class = "tabsbox">
              <div class="tabs-item " :class="{'active': ywtjSate == 1}" @click="ywtjClick('1')">
                <div class = "tab_borderleft"></div>
                <div class = "tabfon">带宽</div>
                <div class = "tab_borderright"></div>

              </div>
              <div class="tabs-item" :class="{'active': ywtjSate == 2}" @click="ywtjClick('2')">
                <div class = "tab_borderleft"></div>
                <div class = "tabfon">融合</div>
                <div class = "tab_borderright"></div>
              </div>
            </div>

            <div class = "flex tjbox" v-show="ywtjSate == 1">
              <div class = "tjitem">
                <span class = "nfont tjnf">日发展</span>
                <span class = "numfont">702</span>
              </div>
              <div class = "tjitem">
                <span class = "nfont tjnf">本季度日均发展</span>
                <span class = "numfont">613</span>
              </div>
            </div>

             <div class = "flex tjbox" v-show="ywtjSate == 2">
              <div class = "tjitem">
                <span class = "nfont tjnf">日转融</span>
                <span class = "numfont">702</span>
              </div>
              <div class = "tjitem">
                <span class = "nfont tjnf">本季度日均转融</span>
                <span class = "numfont">613</span>
              </div>
            </div>




            <div class = "echart_linebox" >
               <div class="tabs-item echarttile">
                <div class = "tab_borderleft"></div>
                <div class = "tabfon">{{ywtjSate == 1 ? '近七日日均发展变化' : '近七日日均转融变化'}}</div>
                <div class = "tab_borderright"></div>
              </div>
             <echart-line :xdata = "lineXdata1" :vdata = "lineVdata1" domid = "echartline1"></echart-line>
            </div>

            <div class = "flex tjbox" v-show="ywtjSate == 1">
              <div class = "tjitem">
                <span class = "nfont tjnf">月发展</span>
                <span class = "numfont">702</span>
              </div>
              <div class = "tjitem">
                <span class = "nfont tjnf">本季度累计发展</span>
                <span class = "numfont">613</span>
              </div>
            </div>

            <div class = "flex tjbox" v-show="ywtjSate == 2">
              <div class = "tjitem">
                <span class = "nfont tjnf">月转融</span>
                <span class = "numfont">702</span>
              </div>
              <div class = "tjitem">
                <span class = "nfont tjnf">本季度累计转融</span>
                <span class = "numfont">613</span>
              </div>
            </div>

            <div class = "flex tmbox" v-show="ywtjSate==1">
              <div class = "flex1" style="margin-right: 15px">
                <dl class = "ltbomf">
                  <dt class="numfont">2.3%</dt>
                  <dd>宽带流失</dd>
                </dl>
              </div>
               <div class = "flex1">
                 <dl class = "ltbomf">
                  <dt class="numfont">36.3%</dt>
                  <dd>包年到期续约率</dd>
                </dl>
               </div>
            </div>
         </div>
         <div class = "flex flex1 liquidbox" style="margin-top: 10px">
           <div class = "liquiditem">
             <div class = "liqleft">
               <img src="~@/assets/images/bigScreen/resource/zhuangji.png" style="width: 30px;" alt="" srcset="">
             </div>
             <div class = "liqright">
               <div class = "liqechartbox">
                 <div class = "flex1">
                   <div style="width: 100%; height: 100%;">
                     <echart-liquid :pvalue = "liquidVal1" domid = "echartLiquid1"></echart-liquid>
                   </div>
                 </div>
                 <div class="numfont">2</div>
                 <div class="nfont">月累竣工率</div>
               </div>
               <div class = "liqechartbox">
                 <div class = "flex1">
                   <echart-liquid :pvalue = "liquidVal2" domid = "echartLiquid2"></echart-liquid>
                 </div>
                 <div class="numfont">2</div>
                 <div class="nfont">月累竣工率</div>
               </div>
               <div class = "liqechartbox">
                 <div class = "flex1">
                  <echart-liquid :pvalue = "liquidVal3" domid = "echartLiquid3"></echart-liquid>
                 </div>
                 <div class="numfont">2</div>
                 <div class="nfont">月累竣工率</div>
               </div>
             </div>
           </div>
            <div class = "liquiditem">
               <div class = "liqleft">
               <img src="~@/assets/images/bigScreen/resource/yiji.png" style="width: 30px;" alt="" srcset="">
             </div>
              <div class = "liqright">
                <div class = "liqechartbox">
                 <div class = "flex1">
                   <echart-liquid :pvalue = "liquidVal2" domid = "echartLiquid4"></echart-liquid>
                 </div>
                 <div class="numfont">2</div>
                 <div class="nfont">月累竣工率</div>
                </div>

                <div class = "liqechartbox">
                 <div class = "flex1">
                   <div style="width: 100%; height: 100%;">
                     <echart-liquid :pvalue = "liquidVal1" domid = "echartLiquid5"></echart-liquid>
                   </div>
                 </div>
                 <div class="numfont">2</div>
                 <div class="nfont">月累竣工率</div>
               </div>

              </div>
            </div>

         </div>


      </div>
      <div class = "bodycenter" style="margin-bottom: 20px;" >

           <iframe ref="iframe" :src="iframeSrc" frameborder="0" style="width: 100%; height: 100%"></iframe>

      </div>
      <div class = "bodyright bwwith">
        <div class = "subtitle">
         <div class = "titlefont stitle">小区资源</div>
         </div>

         <div class = "lefttbox" style="height: 60%;">
             <div class = "felx statename">
               <div class = "iconbox">
                 <img src="~@/assets/images/bigScreen/resource/icon.png" style="width: 60px" alt="" >
               </div>
               <div class = "statename_right flex1">
                 <div class = "rstitle">清河西苑小区</div>
                 <div class = "rborderc">
                   <span class = "nfont">小区编码</span>
                   <span class="numfont">2345343</span>
                 </div>
               </div>

             </div>

             <div class = "stateinfo clexrfix">
               <div class="stateitm flex1 stateitmleft">
                 <div>
                    <span class = "nfont bcolor" style="margin-right: 10px">物业公司</span>
                    <span >红玫瑰物业</span>
                 </div>

                 <div>
                    <span class = "nfont bcolor" style="margin-right: 10px">车位数量</span>
                    <span class = "numfont">1000</span>
                 </div>

                 <div>
                    <span class = "nfont bcolor" style="margin-right: 10px">销售状态</span>
                    <span >在售</span>
                 </div>

                  <div>
                    <span class = "nfont bcolor" style="margin-right: 10px">是否进线</span>
                    <span >是</span>
                 </div>

               </div>
               <div class="stateitm flex1" style="margin-left: 5px">
                 <div>
                    <span class = "nfont bcolor" style="margin-right: 10px">建设环节</span>
                    <span >竣工</span>
                 </div>

                 <div>
                    <span class = "nfont bcolor" style="margin-right: 10px">是否A类</span>
                    <span >是</span>
                 </div>

                 <div>
                    <span class = "nfont bcolor" style="margin-right: 10px">进线时间</span>
                    <span >2007-01-21</span>
                 </div>
               </div>
             </div>

             <div class="ybpchartbox flex flex1">
               <div class = "flex flex1">
                 <div class = "flex flex1 echartGaugebox" >
                   <echartGauge :pvalue = "echartGaugeval1" domid = "echartGauge1"></echartGauge>
                   <div class = "bcolor nfont" style="font-size: 13px">联通用户数</div>
                 </div>
                 <div class = "flex flex1 echartGaugebox">
                   <echartGauge :pvalue = "echartGaugeval2" domid = "echartGauge2"></echartGauge>
                    <div class = "bcolor nfont" style="font-size: 13px">小区用户数</div>
                 </div>
               </div>
               <div class = "flex flex1 " style="margin-top: 10px">
                  <div class="flex1 peiitem" >
                      <echartPie :pvalue = "pieval1" domid = "echartPie1"></echartPie>
                      <div class = "piefon nfont bcolor">家庭渗透率</div>
                  </div>
                  <div class="flex1 peiitem" >
                      <echartPie :pvalue = "pieval2" domid = "echartPie2"></echartPie>
                      <div class = "piefon nfont bcolor">端口占用率</div>
                  </div>

                   <div class="flex1 peiitem" >
                      <echartPie :pvalue = "pieval3" domid = "echartPie3"></echartPie>
                      <div class = "piefon nfont bcolor">一级分光占有率</div>
                  </div>

               </div>
             </div>
         </div>

         <div class = "flex flex1 flexcol" style="margin-top: 30px;">
           <div class = "flex rbtbox">
              <div class="tabs-item flex" style="width: 100px">
                <div class = "tab_borderleft"></div>
                <div class = "tabfon bcolor" style="color:#02F6FF; margin: 0 auto;">变化趋势</div>
                <div class = "tab_borderright"></div>
              </div>
              <div class = "flex1 clearfix">
                <div class="pull-right">
                  <span class = "stabitem nfont " :class = "{'active': bhqsState == 1}" @click="bhqsClick('1')">周</span>
                  <span class = "stabitem nfont" :class = "{'active': bhqsState == 2}" @click="bhqsClick('2')">月</span>
                </div>
              </div>

           </div>
           <div class = "flex1" >
                <echart-line :xdata = "lineXdata2" :vdata = "lineVdata2" domid = "echartline2" ></echart-line>
              </div>
         </div>


      </div>
    </div>
  </div>
</template>

<script>
import Header from './components/Header';
import echartLine from './components/echartLine'
import echartLiquid  from './components/echartLiquid'
import echartGauge from './components/echartGauge'
import echartPie from './components/echartPie'
import store from "store";
export default {
  data () {
    return {
      iframeSrc: 'http://134.32.115.253:18080/sdresview/',
      ywtjSate: 1,
      bhqsState: 1,
      liquidVal1: 0.4,
      liquidVal2: 0.6,
      liquidVal3: 0.7,

      echartGaugeval1: 1698,
      echartGaugeval2: 3266,

      pieval1: 44,
      pieval2: 30,
      pieval3: 56.34,
      lineXdata1: [10, 11, 12, 13, 14],
      lineVdata1: [
        [100, 200, 139, 343, 245],
        [120, 240, 119, 243, 145]
      ],
      lineXdata2: [1,2,3,4,5],
      lineVdata2: [
        [100, 200, 139, 343, 245],
        [120, 240, 119, 243, 145]
      ]

    }
  },
  components: {
    Header,
    echartLine,
    echartLiquid,
    echartGauge,
    echartPie
  },
  mounted () {
    if (store.get('userInfo').isAddMask == '1') {
      this.$watermark(store.get('userInfo').serialNumber);
    } else {
      this.$watermark("");
    }
  },
  watch: {},
  computed: {},
  methods: {
    bhqsClick (val) {
      this.bhqsState = val
    },
    ywtjClick (val) {
      this.ywtjSate = val
    }
  }
}
</script>

<style lang='scss' scoped>
  @import url('./css/comme.scss');

  .container {
    display: flex;
    flex-direction: column;
    padding: 10px;
    padding-top: 5px;
  }
  .headerbox {
    position: relative;
    width: 100%;
    height: 60px;
    top: 0;
  }
  .bodybox {
    flex: 1;
    background: url("~@/assets/images/bigScreen/resource/bborder.png") left no-repeat;
    background-size: 100% 100%;
    display: flex;
    flex-direction: row;
    padding-top: 10px;
    margin-bottom: 10px;
    margin-top: 10px;
    z-index: 999;

  }
  .bodyleft {
    min-width: 420px;
    width: 28%;
    padding: 10px 15px;
    display: flex;
    flex-direction: column;
  }
  .bodycenter {
    flex: 1;
    background: url("~@/assets/images/bigScreen/fullService/mapBg.png")  no-repeat;
    background-size: 100% 98%;
    padding: 60px 20px 30px 20px;
    box-sizing: border-box;
  }
  .bodyright {
    min-width: 420px;
    width: 28%;
    padding: 15px;
    display: flex;
    flex-direction: column;
  }
  .subtitle {
    height: 50px;
    background:url("~@/assets/images/bigScreen/sborder.png") no-repeat;
    background-size:100% 100%;
    // background: ;
  }
  .stitle {
    line-height: 50px;
    text-align: left;
    font-size: 20px;
    margin-left: 36px;
    color: #02F6FF;
  }
  .tabsbox {
    display: flex;
    justify-content:space-between;
    margin-top: 10px;
    font-size: 16px;
  }
  .tabs-item {
    position: relative;
    width: 48%;
    height: 22px;
    line-height: 22px;
    text-align: center;
    text-align: center;
  }
  .tab_borderleft{
    contain: '';
    height: 22px;
    width: 15px;
    position: absolute;
    border: 1px solid #4f98f7;
    left: 0;
    top: 0;
    border-right: none;
  }
  .tab_borderright{
    contain: '';
    height: 22px;
    width: 15px;
    position: absolute;
    border: 1px solid #4f98f7;
    right: 0;
    top: 0;
    border-left: none;
  }
  .tabfon {
    color: #4f98f7 ;
    cursor: pointer;
     font-size: 16px;
  }
  .tabs-item.active .tab_borderleft {
     border: 1px solid #02F6FF;
     border-right: none;
  }
  .tabs-item.active .tab_borderright {
     border: 1px solid #02F6FF;
     border-left: none;
  }
   .tabs-item.active .tabfon {
    color: #02F6FF ;
  }
  .tabs-item.active {
   background: radial-gradient(#4df0f775, #144e9836);
  }
  .tjbox {
    background:#0b2a56;
    margin-top: 15px;
    padding:  4px 8px;

  }
  .tjitem {
    flex: 1;
  }
  .tjbox .tjitem:last-child {
    flex: 1.2;
  }
  .tjnf {
    font-size: 14px;
    color: #02F6FF;
    margin-right: 10px;
  }
  .echart_linebox {
    height: 50%;
    position: relative;
  }
  .echarttile {
    position: absolute;
    left: 0;
    top: 10px;
    z-index: 10;
  }
  .echarttile .tabfon {
    color: #02F6FF;
  }
  .tjitem .numfont{
    font-size: 16px;
  }
  .lefttbox {
    display: flex;
    flex-direction: column;
  }
  .flex1 {
    flex: 1;
  }
  .ltbomf {
    text-align: center;
  }
  .ltbomf dt {
    font-size: 18px;
  }
   .ltbomf dd {
     color: #02F6FF;
   }
   .ltbomf::after{
    content: '';
    height: 6px;
    width: 100%;
    background: url("~@/assets/images/bigScreen/ligtdian.png") no-repeat;
    background-position: center;
    display: block
   }
   .liquidbox {

     display: flex;
     flex-direction: column;
   }
   .liquiditem {
     flex: 1;
     display: flex;
   }
   .liqleft {
    display: flex;
    align-items: center;
    position: relative;
   }
   .liqleft::after{
     content: '';
     display: block;
     background: url("~@/assets/images/bigScreen/resource/split.png") no-repeat;
     background-size: 100% 100%;
     height: 70%;
     width: 1px;
     margin-left: 10px;
   }
   .liqright {
     flex: 1;
     margin-left: 10px;
     display: flex;
   }
   .liqechartbox {
     flex: 1;
     display: flex;
     flex-direction: column;
     text-align: center;
   }
   .liqechartbox .numfont {
     color: #02F6FF;
   }
   .liqechartbox .nfont {
     font-size: 13px;
   }
   .statename {
     width: 100%;
     height: 60px;
     display: flex;
   }
   .statename_right {
     flex: 1;
     margin-left: 10px;
     color: #02F6FF;
     display: flex;
     flex-direction: column;
   }
   .rstitle {
     height: 32px;
     line-height: 32px;
     font-size: 16px;
     background: url("~@/assets/images/bigScreen/fullService/biaoti.png") no-repeat right;


   }
   .rborderc {
     height: 24px;
     line-height: 24px;
     width: 60%;
     background: url("~@/assets/images/bigScreen/resource/rborder.png") no-repeat;
     background-size: 100% 100%;
     text-align: center;
     font-size: 14px;
   }
   .rborderc .numfont {
     color: #fff;
     margin-left: 10px;
   }
   .stateinfo {
     padding: 5px;
     margin-top: 10px;
     background: #0a274e;
     display: flex;
     font-size: 14px;
     line-height: 26px;
     border-radius: 5px;
   }
   .stateitmleft {
     position: relative;
   }
   .stateitmleft::after{
     content: '';
     position: absolute;
     right: 5px;
     top: 0;
     display: block;
     background: url("~@/assets/images/bigScreen/resource/split.png") no-repeat;
     background-size: 100% 100%;
     height: 100%;
     width: 1px;
   }
   .ybpchartbox {
     display: flex;
     flex-direction: column;
     margin-top: 10px;
   }
   .echartGaugebox {
     position: relative;
     flex-direction:column;
     text-align: center;
   }
   .echartGaugebox .nfont {
     position: absolute;
     bottom: 0px;
     text-align: center;
     width: 100%;
   }
   .peiitem {
     position: relative;
   }
   .peiitem .piefon {
     position: absolute;
     bottom: -14px;
     text-align: center;
     width: 100%;
     font-size: 13px;
   }
   .rbtbox {
     width: 100%;
     height: 24px;
     line-height: 24px;
   }
   .stabitem {
     padding: 2px 4px;
     border: 1px solid #4f98f7;
     color: #4f98f7;
     border-radius: 4px;
     font-size: 12px;
     cursor: pointer;

   }
   .stabitem:first-child {
       margin-right: 10px;
   }
   .stabitem.active {
      border: 1px solid #02F6FF;
     color: #02F6FF;
   }
   .tmbox {
    flex: 1;
    align-items: center;
    margin-top: 10px;
   }
</style>