import echarts from 'echarts'
import _ from 'lodash'
export default {
    initEchart_barLine(data) {
        var echart = echarts.init(document.getElementById(data.domId))
        data.barData = data.barData.map(item => {
            return (Number(item) || 0)
        })
        var maxY1 = _.max(_.concat(data.barData, (Number(data.bar_markLine) || 0)));
        var option = {
            tooltip: {
                trigger: "axis",
                axisPointer: {
                    type: "shadow",
                    label: {
                        show: true
                    }
                }
            },
            grid: {
                left: "20",
                top: "40",
                right: "20",
                bottom: "10",
                containLabel: true
            },
            legend: {
                data: data.legend,
                textStyle: {
                    color: "#fff",
                    fontSize: 12
                }
            },
            xAxis: {
                data: data.xData,
                axisLine: {
                    show: true, //隐藏X轴轴线
                    lineStyle: {
                        color: "#3d5269",
                        width: 1
                    }
                },
                axisTick: {
                    show: true, //隐藏X轴刻度
                    alignWithLabel: true
                },
                axisLabel: {
                    show: true,
                    textStyle: {
                        color: "#fff", //X轴文字颜色
                        fontSize: 12
                    },
                    margin: 12,
                    interval: 0,
                    rotate: 40
                }
            },
            yAxis: [{
                    max: maxY1,
                    type: "value",
                    position: "top",
                    name: data.uni ? data.uni : "(数量)",
                    nameTextStyle: {
                        color: "#ddd",
                        fontSize: 12
                    },
                    splitNumber: 3,
                    splitLine: {
                        show: true,
                        lineStyle: {
                            width: 1,
                            color: "#3d5269"
                        }
                    },
                    axisTick: {
                        show: false
                    },
                    axisLine: {
                        show: false
                    },
                    axisLabel: {
                        show: true,
                        textStyle: {
                            color: "#ddd",
                            fontSize: 12
                        }
                    }
                },
                {
                    type: "value",
                    name: data.lineData && data.lineData.length ? (data.unit || "(小时)") : '',
                    splitNumber: 2,
                    nameTextStyle: {
                        color: "#ddd",
                        fontSize: 12
                    },
                    position: "top",
                    splitLine: {
                        show: false
                    },
                    axisTick: {
                        show: false
                    },
                    axisLine: {
                        show: false,
                        lineStyle: {
                            color: "#396A87",
                            width: 1
                        }
                    },
                    axisLabel: {
                        show: true,
                        formatter: "{value}", //右侧Y轴文字显示
                        textStyle: {
                            color: "#ddd",
                            fontSize: 12
                        }
                    }
                }
            ],
            series: [{
                    name: data.name ? data.name : '工单数量',
                    type: "bar",
                    barMaxWidth: 18,
                    itemStyle: {
                        normal: {
                            label: {
                                show: true, //开启显示
                                position: 'top', //在上方显示
                                textStyle: { //数值样式
                                    color: "rgba(250,250,250,0.8)",
                                    fontSize: 13,
                                    fontWeight: 600
                                },
                                formatter: ('{c}' + (data.uni || ''))
                            },
                            color: new echarts.graphic.LinearGradient(0, 0, 1, 1, [{
                                offset: 0,
                                color: 'rgba(15,197,243,0.8)'
                            }, {
                                offset: 1,
                                color: 'rgba(15,197,243,0)'
                            }]),
                            borderColor: new echarts.graphic.LinearGradient(0, 0, 1, 1, [{
                                offset: 0,
                                color: 'rgba(180,240,255,1)'
                            }, {
                                offset: 1,
                                color: 'rgba(15,197,243,0.3)'
                            }]),
                            borderWidth: 1
                        }
                    },
                    data: data.barData,
                    markLine: {
                        show: false,
                        symbol: ['none', "none"],
                        silent: true,
                        lineStyle: {
                            normal: {
                                type: "dashed"
                            }
                        },
                        label: {
                            show: data.bar_markLine ? true : false,
                            position: "insideEndTop",
                            formatter: (data.bar_markname || '') + '平均值:{c}',
                            fontSize: 13,
                            color: '#bce3f5',
                            padding: [0, 15, 0, 0]
                        },
                        data: [{
                            yAxis: data.bar_markLine || '',
                            lineStyle: {
                                width: data.bar_markLine ? 1.5 : 0,
                                color: "rgba(15,197,243,1)"
                            }
                        }]
                    }
                },

                {
                    name: "平均处理时长",
                    type: "line",
                    yAxisIndex: 1, //使用的 y 轴的 index，在单个图表实例中存在多个 y轴的时候有用
                    showAllSymbol: true, //显示所有图形。
                    symbol: "circle", //标记的图形为实心圆
                    symbolSize: 5, //标记的大小
                    itemStyle: {
                        //折线拐点标志的样式
                        color: "#70ad4a",
                        borderColor: "#70ad4a",
                        width: 2,
                        shadowColor: "#26D9FF",
                        shadowBlur: 2
                    },
                    lineStyle: {
                        color: "#70ad4a",
                        width: 2,
                        shadowBlur: 2
                    },
                    data: data.lineData,
                    markLine: {
                        show: false,
                        symbol: ['none', "none"],
                        silent: true,
                        lineStyle: {
                            normal: {
                                type: "dashed"
                            }
                        },
                        label: {
                            show: data.line_markLine ? true : false,
                            position: "insideEndTop",
                            formatter: (data.line_markname || '') + '平均值:{c}',
                            fontSize: 13,

                            padding: [0, 15, 0, 0]
                        },
                        data: [{
                            yAxis: data.line_markLine || '',
                            lineStyle: {
                                width: data.line_markLine ? 1.5 : 0,
                                color: "#70ad4a"
                            }
                        }]
                    }
                }
            ]
        }
        if (data.xData.length > 12) {
            option.dataZoom = [{
                show: true,
                start: 0,
                end: data.zoomVal || 60,
                bottom: 16,
                textStyle: {
                    color: "rgba(204,187,225,0)",
                },
                fillerColor: "rgba(67,55,160,0.3)",
                borderColor: "rgba(204,187,225,0.1)"
            }]
        };
        echart.setOption(option, true);
    },
    initEchart_lines(data, callbk) {
        var echart = echarts.init(document.getElementById(data.domId))
        var option = {
            tooltip: {
                trigger: "axis",
                axisPointer: {
                    type: "shadow",
                    textStyle: {
                        color: "#fff"
                    }

                },
            },
            grid: {
                left: "10",
                top: "30",
                right: "10",
                bottom: "10",
                containLabel: true
            },
            legend: {
                data: data.legend,
                textStyle: {
                    color: "#fff",
                    fontSize: 12
                }
            },
            xAxis: [{
                type: 'category',
                axisLine: {
                    show: false
                },

                axisLabel: {
                    color: '#fff',
                    rotate: 40,
                    margin: 12
                },
                splitLine: {
                    show: false
                },
                boundaryGap: true,
                data: data.xData,

            }],

            yAxis: [{
                type: 'value',
                splitNumber: 3,
                splitLine: {
                    show: true,
                    lineStyle: {
                        color: 'rgba(255,255,255,0.1)'
                    }
                },
                axisLine: {
                    show: false,
                },
                axisLabel: {
                    show: true,
                    margin: 20,
                    textStyle: {
                        color: '#d1e6eb',

                    },
                },
                axisTick: {
                    show: false,
                },
            }],
            series: [{
                    name: data.legend[0],
                    "type": "line",
                    type: 'line',
                    smooth: true, //是否平滑
                    showAllSymbol: true,
                    symbol: 'circle',
                    symbolSize: 8,
                    label: {
                        show: false,
                        position: 'top',
                        textStyle: {
                            color: '#eb6f19',
                        }
                    },
                    itemStyle: {
                        normal: {
                            label: {
                                show: true, //开启显示
                                position: 'insideTop', //在上方显示
                                textStyle: { //数值样式
                                    color: "rgba(250,250,250,1)",
                                    fontSize: 12,
                                    fontWeight: 600
                                }
                            },
                            color: new echarts.graphic.LinearGradient(0, 0, 1, 1, [{
                                offset: 0,
                                color: 'rgba(15,197,243,1)'
                            }, {
                                offset: 1,
                                color: 'rgba(15,197,243,1)'
                            }]),
                            borderColor: new echarts.graphic.LinearGradient(0, 0, 1, 1, [{
                                offset: 0,
                                color: 'rgba(180,240,255,1)'
                            }, {
                                offset: 1,
                                color: 'rgba(15,197,243,1)'
                            }]),
                            borderWidth: 1
                        }
                    },
                    areaStyle: {
                        normal: {
                            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                                    offset: 0,
                                    color: 'rgba(15,197,243,0.3)'
                                },
                                {
                                    offset: 1,
                                    color: 'rgba(15,197,243,0)'
                                }
                            ], false),
                        }
                    },
                    markLine: {
                        show: false,
                        symbol: ['none', "none"],
                        silent: true,
                        lineStyle: {
                            normal: {
                                type: "dashed"
                            }
                        },
                        label: {
                            show: data.line_markLine ? true : false,
                            position: "insideEndTop",
                            formatter: '平均值:{c}',
                            fontSize: 13,

                            padding: [0, 15, 0, 0]
                        },
                        data: [{
                            yAxis: data.line_markLine || '',
                            lineStyle: {
                                width: data.line_markLine ? 1.5 : 0,
                                color: "rgba(15,197,243,1)"
                            }
                        }]
                    },
                    data: data.lineData1
                },
                {
                    name: data.legend[1],
                    type: 'line',
                    smooth: true, //是否平滑
                    showAllSymbol: true,
                    symbol: 'circle',
                    symbolSize: 8,
                    label: {
                        show: false,
                        position: 'top',
                        textStyle: {
                            color: '#eb6f19',
                        }
                    },
                    itemStyle: {
                        normal: {
                            label: {
                                show: true, //开启显示
                                position: 'top', //在上方显示
                                textStyle: { //数值样式
                                    color: "rgba(250,250,250,1)",
                                    fontSize: 12,
                                    fontWeight: 600
                                }
                            },
                            color: new echarts.graphic.LinearGradient(0, 0, 1, 1, [{
                                offset: 0,
                                color: 'rgba(234,220,59,1)'
                            }, {
                                offset: 1,
                                color: 'rgba(234,220,59,1)'
                            }]),
                            borderColor: new echarts.graphic.LinearGradient(0, 0, 1, 1, [{
                                offset: 0,
                                color: 'rgba(180,240,255,1)'
                            }, {
                                offset: 1,
                                color: 'rgba(15,197,243,1)'
                            }]),
                            borderWidth: 1
                        }
                    },
                    areaStyle: {
                        normal: {
                            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                                    offset: 0,
                                    color: 'rgba(234,220,59,0.3)'
                                },
                                {
                                    offset: 1,
                                    color: 'rgba(234,220,59,0)'
                                }
                            ], false),
                        }
                    },
                    markLine: {
                        show: false,
                        symbol: ['none', "none"],
                        silent: true,
                        lineStyle: {
                            normal: {
                                type: "dashed"
                            }
                        },
                        label: {
                            show: data.line_markLine2 ? true : false,
                            position: "insideEndTop",
                            formatter: '平均值:{c}',
                            fontSize: 13,

                            padding: [0, 15, 0, 0]
                        },
                        data: [{
                            yAxis: data.line_markLine2 || '',
                            lineStyle: {
                                width: data.line_markLine2 ? 1.5 : 0,
                                color: "rgba(234,220,59,1)"
                            }
                        }]
                    },
                    data: data.lineData2,
                },
                {
                    name: data.legend[2],
                    type: 'line',
                    smooth: true, //是否平滑
                    showAllSymbol: true,
                    symbol: 'circle',
                    symbolSize: 8,
                    label: {
                        show: false,
                        position: 'top',
                        textStyle: {
                            color: '#eb6f19',
                        }
                    },

                    itemStyle: {
                        color: "#eb6f19",
                        borderColor: "#fff",
                        borderWidth: 1,
                        shadowColor: 'rgba(0, 0, 0, .3)',
                        shadowBlur: 0,
                        shadowOffsetY: 2,
                        shadowOffsetX: 2,
                    },
                    areaStyle: {
                        normal: {
                            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                                    offset: 0,
                                    color: 'rgba(235,111,25, 0.5)'
                                },
                                {
                                    offset: 1,
                                    color: 'rgba(235,111,25,0)'
                                }
                            ], false),
                        }
                    },
                    markLine: {
                        show: false,
                        symbol: ['none', "none"],
                        silent: true,
                        lineStyle: {
                            normal: {
                                type: "dashed"
                            }
                        },
                        label: {
                            show: data.line_markLine3 ? true : false,
                            position: "insideEndTop",
                            formatter: '平均值:{c}',
                            fontSize: 13,

                            padding: [0, 15, 0, 0]
                        },
                        data: [{
                            yAxis: data.line_markLine3 || '',
                            lineStyle: {
                                width: data.line_markLine3 ? 1.5 : 0,
                                color: "#eb6f19"
                            }
                        }]
                    },
                    data: data.lineData3,
                    z: 10
                },
            ]
        };
        if (data.xData.length > 12) {
            option.dataZoom = [{
                show: true,
                start: 0,
                end: data.zoomVal || 60,
                right: 10,
                bottom: 16,
                textStyle: {
                    color: "rgba(204,187,225,0)",
                },
                fillerColor: "rgba(67,55,160,0.3)",
                borderColor: "rgba(204,187,225,0.1)"
            }]
        }
        echart.setOption(option, true);
        echart.on('click', function(params) {
            callbk && callbk(params)
        })

    },
    initEchart_pm(params, callbk) {
        var echart = echarts.init(document.getElementById(params.domId))

        var attackSourcesColor = [
            new echarts.graphic.LinearGradient(0, 1, 1, 1, [
                { offset: 0, color: "#EB3B5A" },
                { offset: 1, color: "#FE9C5A" }
            ]),
            new echarts.graphic.LinearGradient(0, 1, 1, 1, [
                { offset: 0, color: "#FA8231" },
                { offset: 1, color: "#FFD14C" }
            ]),
            new echarts.graphic.LinearGradient(0, 1, 1, 1, [
                { offset: 0, color: "#F7B731" },
                { offset: 1, color: "#FFEE96" }
            ]),
            new echarts.graphic.LinearGradient(0, 1, 1, 1, [
                { offset: 0, color: "#395CFE" },
                { offset: 1, color: "#2EC7CF" }
            ])
        ];
        var attackSourcesColor1 = [
            "#EB3B5A",
            "#FA8231",
            "#F7B731",
            "#3860FC",
            "#1089E7",
            "#F57474",
            "#56D0E3",
            "#1089E7",
            "#F57474",
            "#1089E7",
            "#F57474",
            "#F57474"
        ];
        var attaData = [];
        var attaName = [];
        params.data.forEach((it, index) => {
            attaData[index] = it.val;
            attaName[index] = it.name;
        });
        var salvProMax = []; //背景按最大值
        for (let i = 0; i < attaData.length; i++) {
            salvProMax.push(attaData[0]);
        }

        function attackSourcesDataFmt(sData) {
            var arr = [];
            sData.forEach(function(item, i) {
                let itemStyle = {
                    color: i > 3 ? attackSourcesColor[3] : attackSourcesColor[i]
                };
                arr.push({
                    value: item,
                    itemStyle: itemStyle
                });
            });
            return arr;
        }

        var option = {
            tooltip: {
                show: true,
                textStyle: {
                    fontSize: 14
                }
            },
            color: ["#F7B731"],
            grid: {
                left: "5%",
                right: "5%",
                width: "80%",
                bottom: "10",
                top: "10",
                containLabel: true
            },

            xAxis: {
                type: "value",
                splitLine: {
                    show: false
                },
                axisLabel: {
                    show: false
                },
                axisTick: {
                    show: false
                },
                axisLine: {
                    show: false
                }
            },
            yAxis: [{
                type: "category",
                triggerEvent: true,
                inverse: true,
                axisTick: "none",
                axisLine: "none",
                show: true,
                interval: 0,
                axisLabel: {
                    textStyle: {
                        color: "#fff",
                        fontSize: "14"
                    }
                },
                data: attackSourcesDataFmt(attaName)
            }, ],
            series: [{
                    zlevel: 1,
                    type: "bar",
                    barWidth: 14,
                    data: attackSourcesDataFmt(attaData),

                    itemStyle: {
                        normal: {
                            barBorderRadius: 10
                        }
                    },
                    label: {
                        show: true,
                        fontSize: 14,
                        color: "#fff",
                        position: "right",
                        textBorderWidth: 1,
                        padding: [2, 0, 0, 0],
                        formatter: '{c} ' + (params.uni || '')
                    }
                },

                {
                    type: "bar",
                    barWidth: 15,
                    barGap: "-100%",
                    margin: "20",
                    data: salvProMax,
                    tooltip: {
                        show: false
                    },
                    textStyle: {
                        fontSize: 12,
                        color: "#fff"
                    },
                    itemStyle: {
                        normal: {
                            color: "#05325F",
                            fontSize: 10,
                            barBorderRadius: 30
                        },
                    }
                }
            ]
        };
        if (params.data.length > 10) {
            option.dataZoom = [{
                type: 'slider',
                show: true,
                yAxisIndex: [0],
                right: 0,
                start: 0, //数据窗口范围的起始百分比
                end: params.zoomVal || 60,
                right: 10,
                width: 15,
                fillerColor: "rgba(67,55,160,0.4)",
                borderColor: "rgba(204,187,225,0.5)"
            }, ]

        }
        echart.setOption(option, true);

        echart.on("click", function(param) {
            if (param.componentType == "yAxis") {
                callbk && callbk(param)
            }
        })
    },
    initEchart_singLine(params) {
        params.data = params.data.map(item => {
            return (Number(item) || 0);
        })
        var maxY1 = _.max(_.concat(params.data, (Number(params.bar_markLine) || 0)));
        var echart = echarts.init(document.getElementById(params.domId))

        var option = {
            tooltip: {
                trigger: 'axis',
                axisPointer: {
                    type: 'shadow'
                }
            },
            grid: {
                top: '10%',
                left: '10',
                right: '20',
                bottom: '10',
                containLabel: true
            },
            xAxis: [{
                type: 'category',
                axisLine: {
                    show: true
                },
                splitArea: {
                    color: '#f00',
                    lineStyle: {
                        color: '#f00'
                    },
                },
                axisLabel: {
                    color: '#fff',
                    interval: 0,
                    rotate: 40,
                    margin: 12
                },
                splitLine: {
                    show: false
                },
                boundaryGap: true,
                data: params.xData,

            }],

            yAxis: [{
                max: maxY1,
                type: 'value',
                splitNumber: 3,
                splitLine: {
                    show: true,
                    lineStyle: {
                        color: 'rgba(255,255,255,0.1)'
                    }
                },
                axisLine: {
                    show: false,
                },
                axisLabel: {
                    show: true,
                    textStyle: {
                        color: '#d1e6eb',

                    },
                },
                axisTick: {
                    show: false,
                },
            }],
            series: [{
                name: params.name,
                type: 'line',
                smooth: true, //是否平滑
                showAllSymbol: true,
                symbol: 'circle',
                symbolSize: 10,
                label: {
                    show: true,
                    position: 'top',
                    textStyle: {
                        color: '#fff',
                    },
                    formatter: '{c}' + (params.uni || '')

                },
                itemStyle: {
                    color: params.color || "#00ca95",
                    borderColor: "#fff",
                    borderWidth: 1,
                    shadowColor: 'rgba(0, 0, 0, .3)',
                    shadowBlur: 0,
                    shadowOffsetY: 1,
                    shadowOffsetX: 1,
                },
                tooltip: {
                    show: true
                },
                areaStyle: {
                    normal: {
                        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                                offset: 0,
                                color: params.color ? 'rgba(227,126,57,0.3)' : 'rgba(0,202,149,0.3)'
                            },
                            {
                                offset: 1,
                                color: params.color ? 'rgba(227,126,57,0)' : 'rgba(0,202,149,0)'
                            }
                        ], false),
                        shadowColor: 'rgba(0,202,149, 0.9)',
                        shadowBlur: 20
                    }
                },
                data: params.data,
                markLine: {
                    show: false,
                    symbol: ['none', "none"],
                    silent: true,
                    lineStyle: {
                        normal: {
                            type: "dashed"
                        }
                    },
                    label: {
                        show: params.line_markLine ? true : false,
                        position: "insideEndTop",
                        formatter: '平均值:{c}',
                        fontSize: 13,

                        padding: [0, 15, 0, 0]
                    },
                    data: [{
                        yAxis: params.line_markLine || '',
                        lineStyle: {
                            width: params.line_markLine ? 1.5 : 0,
                            color: params.color ? 'rgba(227,126,57,1)' : 'rgba(0,202,149,1)'
                        }
                    }]
                },
            }, ]
        };
        if (params.data.length > 12) {
            option.dataZoom = [{
                show: true,
                start: 0,
                end: params.zoomVal || 60,
                right: 10,
                bottom: 16,
                textStyle: {
                    color: "rgba(204,187,225,0)",
                },
                fillerColor: "rgba(67,55,160,0.3)",
                borderColor: "rgba(204,187,225,0.1)"
            }]
        }
        echart.setOption(option, true);

        this.$resize = function() {
            echart.resize()
        }
    },

    initAnipie2(params) {
        var myChart = echarts.init(document.getElementById(params.domId))
        var timer = null
        let value = params.value || 0;
        let title = '空闲端口占比';
        var piecolores = Number(value) >= 100 ? [
            [0, '#2CFAFC'],
            [0.5, '#0ff'],
            [1, '#0ff']
        ] : [
            [0, '#2CFAFC'],
            [(100 - value) / 100, '#0ff'],
            [1, '#0f232e']
        ];
        var option = {
            title: {
                text: '{a|' + value + '%' + '}\n{c|' + title + '}',
                x: 'center',
                y: 'center',
                textStyle: {
                    rich: {
                        a: {
                            fontSize: 24,
                            color: '#f87948',
                            fontWeight: '600',
                        },
                        c: {
                            fontSize: 16,
                            color: '#fff',
                            padding: [10, 0]
                        }
                    }
                }
            },
            series: [{
                    type: 'gauge',
                    radius: '78%',
                    clockwise: false,
                    startAngle: '90',
                    endAngle: '-269.9999',
                    splitNumber: 30,
                    detail: {
                        offsetCenter: [0, -20],
                        formatter: ' '
                    },
                    pointer: {
                        show: false
                    },
                    axisLine: {
                        show: true,
                        lineStyle: {
                            color: piecolores,
                            width: 15
                        }
                    },
                    axisTick: {
                        show: false
                    },
                    splitLine: {
                        show: true,
                        length: 80,
                        lineStyle: {
                            shadowBlur: 10,
                            shadowColor: 'rgba(0, 255, 255, 1)',
                            shadowOffsetY: '0',
                            color: '#020f18',
                            width: 1
                        }
                    },
                    axisLabel: {
                        show: false
                    }
                },

                {
                    type: 'pie',
                    radius: ['60%', '56%'],
                    hoverAnimation: false,
                    clockWise: false,
                    itemStyle: {
                        normal: {
                            color: '#0C355E'
                        }
                    },
                    label: {
                        show: false
                    },
                    data: _dashed()
                },

                {
                    type: 'pie',
                    radius: [0, '48%'],
                    hoverAnimation: false,
                    clockWise: false,
                    itemStyle: {
                        normal: {
                            shadowBlur: 20,
                            shadowColor: '#000',
                            color: new echarts.graphic.RadialGradient(0.4, 0.3, 1, [{
                                offset: 0,
                                color: '#0FF',
                            }, {
                                offset: 1,
                                color: '#060f20'
                            }])
                        }
                    },
                    label: {
                        show: false
                    },
                    data: [100]
                }
            ]
        };

        function _dashed() {
            let dataArr = [];
            for (var i = 0; i < 100; i++) {
                if (i % 2 === 0) {
                    dataArr.push({
                        name: (i + 1).toString(),
                        value: 20,
                        itemStyle: {
                            normal: {
                                color: 'rgb(0,255,255,.3)',
                            }
                        }
                    })
                } else {
                    dataArr.push({
                        name: (i + 1).toString(),
                        value: 20,
                        itemStyle: {
                            normal: {
                                color: 'rgb(0,0,0,0)',
                                borderWidth: 1,
                                borderColor: "rgba(0,255,255,1)"
                            }
                        }
                    })
                }

            }
            return dataArr

        }
        myChart.setOption(option, true);

        function doing() {
            let option = myChart.getOption();
            option.series[1].startAngle = option.series[1].startAngle - 1;
            myChart.setOption(option, true);
        }

        function startTimer() {
            timer = setInterval(doing, 100);
        }
        setTimeout(startTimer, 500);

    },
    initChartgauge(params) {
        let data = 100;
        var option = {
            title: [{
                text: params.name || '商务楼宇总数',
                x: 'center',
                top: '54%',
                textStyle: {
                    color: '#fff',
                    fontSize: 14,
                    fontWeight: '500',
                }
            }, {
                text: params.value + (params.unit || ""),
                x: 'center',
                top: '38%',
                textStyle: {
                    fontSize: 20,
                    color: 'aqua',
                    foontWeight: '800',
                },
            }],
            // 极坐标系
            polar: {
                radius: ['60%', '75%'],
                center: ['50%', '50%'],
            },
            // 极坐标系：角度轴
            angleAxis: {
                max: 100 * 360 / 270,
                show: false,
                type: 'value',
                startAngle: 225
            },
            // 极坐标系：径向轴
            radiusAxis: {
                type: 'category',
                show: true,
                axisLabel: {
                    show: false,
                },
                axisLine: {
                    show: false,

                },
                axisTick: {
                    show: false
                },
            },
            series: [
                // 第二层：数据以进度条的形式展示
                {
                    type: 'bar',
                    data: [{
                        value: data
                    }],
                    itemStyle: {
                        color: function() {
                            let obj = {
                                type: 'linear',
                                x: 0, //右
                                y: 0.5, //下
                                x2: 1, //左
                                y2: 0, //上
                                colorStops: [{
                                    offset: 0,
                                    color: '#4978EC'
                                }, {
                                    offset: 1,
                                    color: '#0CD3DB'
                                }]
                            };

                            if (data >= 0 && data < 20) {
                                obj.colorStops[1].color = '#4978EC';
                            } else if (data >= 20 && data < 40) {
                                obj.y = 0.3;
                                obj.x2 = 2;
                            } else if (data >= 40 && data < 60) {
                                obj.y = 0.3;
                                obj.x2 = 1.5;
                            } else if (data >= 60 && data < 80) {
                                obj.y = 0.4;
                                obj.x2 = 1.1;
                            }
                            return obj;
                        }
                    },
                    barGap: '-100%',
                    coordinateSystem: 'polar',
                    roundCap: true,
                    cursor: 'auto',
                    z: 2
                },
                // 第二层：进度条背景
                {
                    type: 'bar',
                    data: [{
                        value: 100,
                    }],
                    itemStyle: {
                        color: '#013f72'
                    },
                    barGap: '-100%',
                    coordinateSystem: 'polar',
                    roundCap: true,
                    cursor: 'auto',
                    emphasis: {
                        itemStyle: {
                            color: '#013f72'
                        }
                    },
                    z: 1
                },
                // 第一层：中心文字展示区
                {
                    type: 'pie',
                    radius: ['0%', '55%'],
                    hoverAnimation: false,
                    center: ['50%', '50%'],
                    cursor: 'auto',
                    itemStyle: {
                        normal: {
                            labelLine: {
                                show: false
                            },
                            color: {
                                type: 'radial',
                                x: 0.5,
                                y: 0.5,
                                r: 0.5,
                                colorStops: [{
                                    offset: 0,
                                    color: '#174869'
                                }, {
                                    offset: 1,
                                    color: '#08385c'
                                }]
                            }
                        }
                    },
                    data: [{
                        value: 100
                    }],
                    z: 2
                },
                // 第三层；仪表盘：只显示刻度
                {
                    type: 'gauge',
                    radius: '82%',
                    startAngle: '225',
                    endAngle: '-45',
                    splitNumber: 10,
                    center: ['50%', '50%'],
                    min: 0,
                    max: 100,
                    pointer: {
                        show: false
                    },
                    title: {
                        show: false
                    },
                    detail: {
                        show: false
                    },
                    data: [{
                        value: 100,
                        name: ''
                    }],
                    axisLine: {
                        lineStyle: {
                            width: 20,
                            color: [
                                [0, '#5fa7ca'],
                                [1, '#5fa7ca']
                            ],
                            opacity: 0
                        }
                    },
                    axisTick: {
                        length: 6,
                        lineStyle: {
                            color: 'auto'
                        }
                    },
                    splitLine: {
                        show: false
                    },
                    axisLabel: {
                        show: false
                    }
                }
            ]
        };
        var echart = echarts.init(document.getElementById(params.domId))
        echart.setOption(option, true);
    },
    initEchart_sbar(data) {
        var echart = echarts.init(document.getElementById(data.domId))
        data.barData = data.barData.map(item => {
            return (Number(item) || 0)
        })
        var option = {
            tooltip: {
                trigger: "axis",
                axisPointer: {
                    type: "shadow",
                    label: {
                        show: true
                    }
                }
            },
            grid: {
                left: "0",
                top: "30",
                right: "0",
                bottom: "10",
                containLabel: true
            },
            legend: {
                show: data.legend && data.legend.length ? true : false,
                data: data.legend,
                textStyle: {
                    color: "#fff",
                    fontSize: 12
                }
            },
            xAxis: {
                data: data.xData,
                axisLine: {
                    show: true, //隐藏X轴轴线
                    lineStyle: {
                        color: "#3d5269",
                        width: 1
                    }
                },
                axisTick: {
                    show: true, //隐藏X轴刻度
                    alignWithLabel: true
                },
                axisLabel: {
                    show: true,
                    textStyle: {
                        color: "#fff", //X轴文字颜色
                        fontSize: 12
                    },
                    margin: 12,
                    interval: 0,
                    rotate: 40
                }
            },
            yAxis: [{
                max: 100,
                type: "value",
                position: "top",
                name: data.uni ? data.uni : "百分比",
                nameTextStyle: {
                    color: "#ddd",
                    fontSize: 12
                },
                splitNumber: 5,
                splitLine: {
                    show: true,
                    lineStyle: {
                        width: 1,
                        color: "#3d5269"
                    }
                },
                axisTick: {
                    show: false
                },
                axisLine: {
                    show: false
                },
                axisLabel: {
                    show: true,
                    textStyle: {
                        color: "#ddd",
                        fontSize: 12
                    }
                }
            }],
            series: [{
                name: data.name || 'OLT设备退服率',
                type: "bar",
                barMaxWidth: 15,
                itemStyle: {
                    normal: {
                        label: {
                            show: true, //开启显示
                            position: 'top', //在上方显示
                            textStyle: { //数值样式
                                color: "rgba(250,250,250,0.8)",
                                fontSize: 13,
                                fontWeight: 600
                            },
                            formatter: ('{c}' + (data.uni || ''))
                        },
                        color: new echarts.graphic.LinearGradient(0, 0, 1, 1, [{
                            offset: 0,
                            color: 'rgba(15,197,243,0.8)'
                        }, {
                            offset: 1,
                            color: 'rgba(15,197,243,0)'
                        }]),
                        borderColor: new echarts.graphic.LinearGradient(0, 0, 1, 1, [{
                            offset: 0,
                            color: 'rgba(180,240,255,1)'
                        }, {
                            offset: 1,
                            color: 'rgba(15,197,243,0.3)'
                        }]),
                        borderWidth: 1
                    }
                },
                data: data.barData,
                markLine: {
                    show: false,
                    symbol: ['none', "none"],
                    silent: true,
                    lineStyle: {
                        normal: {
                            type: "dashed"
                        }
                    },
                    label: {
                        show: data.bar_markLine ? true : false,
                        position: "insideEndTop",
                        formatter: (data.bar_markname || '') + '平均值:{c}',
                        fontSize: 13,
                        color: '#bce3f5',
                        padding: [0, 15, 0, 0]
                    },
                    data: [{
                        yAxis: data.bar_markLine || '',
                        lineStyle: {
                            width: data.bar_markLine ? 1.5 : 0,
                            color: "rgba(15,197,243,1)"
                        }
                    }]
                }
            }, ]
        }
        if (data.xData.length > 12) {
            option.dataZoom = [{
                show: true,
                start: 0,
                end: data.zoomVal || 60,
                bottom: 16,
                textStyle: {
                    color: "rgba(204,187,225,0)",
                },
                fillerColor: "rgba(67,55,160,0.3)",
                borderColor: "rgba(204,187,225,0.1)"
            }]
        };
        echart.setOption(option, true);
    },
}