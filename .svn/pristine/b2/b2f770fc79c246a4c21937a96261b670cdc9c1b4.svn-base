<template>
  <div>
    <div class="Center_L" id="container" ref="myCharts"></div>
  </div>

</template>

<script>
export default {
  name: "doughnutChart",
  props:{
    newWeekGt:Array
  },
  data() {
    return {

    }
  },
  watch:{
    newWeekGt(){
      //console.log('' + JSON.stringify(this.newWeekGt[0]))
      if(this.newWeekGt.length > 0){
          let fristData = ["月费30元以下用户量",parseFloat(this.newWeekGt[0].newWeekLt30)]
          let lastData = ["月费30元以上用户量",parseFloat(this.newWeekGt[0].newWeekGt30)]
          this.ringChart(fristData,lastData)

      }else{
        let fristData = ["月费30元以下用户量",1]
        let lastData = ["月费30元以上用户量",1]
        this.ringChart(fristData,lastData)
      }

    }
  },
  mounted() {
  },
  methods: {
    ringChart(fristData,lastData){
      Highcharts.getOptions().colors = Highcharts.map(Highcharts.getOptions().colors, function (color) {
        return {
          radialGradient: { cx: 0.5, cy: 0.3, r: 0.7 },
          stops: [
            [0, color],
            [1, Highcharts.Color(color).brighten(-0.3).get('rgb')] // darken
          ]
        };
      });
      let chart = Highcharts.chart('container', {
        chart: {
          type: 'pie',
          backgroundColor:'transparent',
          color:'#ffffff',
          options3d: {
            enabled: true,
            alpha: 45,
          }
        },
        
        tooltip: { 
          shared: true,
          borderColor: 'transparent',
          backgroundColor: 'rgba(50,50,50,0.7)',
          style: {
              color: '#fff',
              fontSize: '14px',
          }
        },
        colors: ['#02F6FF', '#26aee8','yellow','green'],
        title: false,
        exporting: {
          enabled:false
        },
        credits: {
          enabled:false
        },
        yAxis: {
          stackLabels: {
            style: {
              color: (Highcharts.theme && Highcharts.theme.textColor) || 'gray' ,
              //textOutline:"none"  解决文字重影问题
            },
            enabled: true
          }
        },
        // subtitle: {
        //   text: 'Highcharts 中的3D环形图'
        // },
        plotOptions: {

          pie: {
            innerSize: 120,
            center: ['50%', '50%'],
            depth: 45,
            allowPointSelect: true,
            cursor: 'pointer',
            format: '<b>{point.name}</b>: {point.percentage:.1f} %',
            dataLabels: {
              enabled: true,
              style: {
                textOutline: false
              },
              formatter: function() {
                return '<span style="color:#02F6FF;font-size: 16px;">' + this.point.name + '</span> </br></br><p style="font-size: 16px;color:#FFFFFF;line-height: 25px;">' + Highcharts.numberFormat(this.percentage, 2) + '%</p>';
              },
            },
          },
        },
        series: [{
          name: '总量',
          style:{
            color:"#03f6fe"
          },
          data: [
            // ["月费30元以下用户量",parseFloat(this.newWeekGt.newWeekLt30)],
            // ["月费30元以上用户量",parseFloat(this.newWeekGt.newWeekGt30)],
            fristData,
            lastData,
          ]
        }]
      });
    }
  },



}
</script>

<style scoped>
.Center_L {
 width: 100%;
  height: 100%;
}
</style>